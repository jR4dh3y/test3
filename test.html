<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WASM Test</title>
</head>
<body>
    <div id="status">Loading...</div>
    
    <script>
        let Module = {
            onRuntimeInitialized: function() {
                console.log('WASM Runtime initialized successfully!');
                document.getElementById('status').innerHTML = 'WASM loaded successfully!';
                
                // Test basic functions
                if (typeof Module._initGame === 'function') {
                    console.log('initGame function found');
                    Module._initGame();
                    console.log('Game initialized');
                    
                    // Test getting values
                    console.log('Player X:', Module._getPlayerX());
                    console.log('Player Y:', Module._getPlayerY());
                    console.log('Player Z:', Module._getPlayerZ());
                    
                    document.getElementById('status').innerHTML += '<br>Game functions working!';
                } else {
                    console.error('initGame function not found');
                    document.getElementById('status').innerHTML = 'Error: WASM functions not found';
                }
            },
            onAbort: function(what) {
                console.error('WASM aborted:', what);
                document.getElementById('status').innerHTML = 'WASM loading failed: ' + what;
            },
            print: function(text) {
                console.log('WASM:', text);
            },
            printErr: function(text) {
                console.error('WASM Error:', text);
            }
        };
        
        // Debug logging
        console.log('About to load WASM...');
        
        // Check after timeout
        setTimeout(() => {
            if (document.getElementById('status').innerHTML === 'Loading...') {
                console.error('WASM loading timeout');
                document.getElementById('status').innerHTML = 'WASM loading timeout';
            }
        }, 5000);
    </script>
    <script async src="game.js"></script>
</body>
</html>
